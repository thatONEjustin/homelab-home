---
import Bookmark from '@components/Bookmark.astro'

import { getCollection, getEntries } from 'astro:content'

const { searchParams } = Astro.url

const filter = (searchParams.get('filter')) ? searchParams.get('filter') : 'all';
 
//console.log(filter)
const filter_bookmarks = ({ id }) => {
  if(filter === 'all') {
    return true
  }

  return id.split('/')[0] === filter
}

const bookmarks_collection = await getCollection('bookmarks', filter_bookmarks)
//console.log(bookmarks_collection)

const bookmarks = await getEntries(bookmarks_collection)

//console.log(bookmarks)
---

<ul class="flex flex-row">
  {bookmarks.map(item => <Bookmark transition:animate="fade" {item} />)}
</ul>
